# Project Backend 04 — Python_Bootcamp  

Резюме: в этом проекте ты научишься добавлять базы данных в веб-приложения на языке **Python** с использованием **Flask** и работать с авторизацией.

## Содержание
 1. [Chapter I](#chapter-i)   
     - [Инструкция](#инструкция)   
 2. [Chapter II](#chapter-ii)  
     - [Общая информация](#общая-информация)  
         - [Авторизация](#авторизация)  
         - [Идентификация, аутентификация, авторизация](#идентификация-аутентификация-авторизация) 
         - [Авторизация с помощью логина и пароля](#авторизация-с-помощью-логина-и-пароля) 
 3. [Chapter III](#chapter-iii)      
     - [Задание 1. Добавление базы данных](#задание-1-добавление-базы-данных)    
     - [Задание 2. Добавление авторизации](#задание-2-добавление-авторизации)  
     - [Задание 3. Добавление логики игры между двумя игроками](#задание-3-добавление-логики-игры-между-двумя-игроками)    

         

## Chapter I
## Инструкция

1. На протяжении всего курса тебя будет сопровождать чувство неопределенности и острого дефицита информации - это нормально. Не забывай, что информация в репозитории и Google всегда с тобой. Как и пиры, и Rocket.Chat. Общайся. Ищи. Опирайся на здравый смысл. Не бойся ошибиться.
2. Будь внимателен к источникам информации. Проверяй. Думай. Анализируй. Сравнивай. 
3. Внимательно читай задания. Перечитай несколько раз. 
4. Читать примеры тоже лучше внимательно. В них может быть что-то, что не указано в явном виде в самом задании.
5. Тебе могут встретиться несоответствия, когда что-то новое в условиях задачи или примере противоречит уже известному. Если встретилось такое — попробуй разобраться. Если не получилось — запиши вопрос в открытые вопросы и выясни в процессе работы. Не оставляй открытые вопросы неразрешенными. 
6. Если задание кажется непонятным или невыполнимым — так только кажется. Попробуй его декомпозировать. Скорее всего, отдельные части станут понятными. 
7. На пути тебе встретятся самые разные задания. Те, что помечены звездочкой (\*) — подходят для более дотошных. Они повышенной сложности и не обязательны к выполнению. Но если ты их сделаешь, то получишь дополнительный опыт и знания.
8. Не пытайся обмануть систему и окружающих. В первую очередь ты обманешь себя.
9. Есть вопрос? Спроси соседа справа. Если это не помогло — соседа слева.
10. Когда пользуешься помощью — всегда разбирайся до конца: почему, как и зачем. Иначе помощь не будет иметь смысла.
11. Всегда делай push только в ветку develop! Ветка master будет проигнорирована. Работай в директории src.
12. В твоей директории не должно быть иных файлов, кроме тех, что обозначены в заданиях.

## Chapter II
## Общая информация

### Авторизация

Средства авторизации контролируют доступ легальных пользователей к ресурсам системы, предоставляя каждому из них именно те права, которые ему были определены администратором.

### Идентификация, аутентификация, авторизация

**Идентификация** — процедура, в результате выполнения которой для субъекта выявляется его уникальный признак, однозначно определяющий его в информационной системе.

**Аутентификация** — процедура проверки подлинности, например, проверка подлинности пользователя путем сравнения введенного им пароля с паролем, сохраненным в системе.

**Авторизация** — предоставление определенному лицу или группе лиц прав на выполнение определенного набора действий.

### Авторизация с помощью логина и пароля

Метод основывается на том, что пользователь должен предоставить логин и пароль для успешной идентификации и аутентификации в системе. Пара логина и пароля задается пользователем при его регистрации в системе. В случае успешной авторизации на сервере пользователю выдаются права на выполнение доступных ему запросов.

Клиент отправляет запрос на сервер и получает в виде ответа сообщение «Unauthorized» вместе с информацией о порядке авторизации. После успешного прохождения авторизации в каждый последующий запрос клиента автоматически добавляется заголовок «Authorization» ([формирование заголовка авторизации](https://datatracker.ietf.org/doc/html/rfc7617)), в котором передаются данные клиента для аутентификации сервером.

<div align="center">
  <img src="misc/images/Auth.png"/>
</div>

Существуют и [другие способы авторизации](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#authentication_schemes).

### Темы для изучения:
- Веб-приложение;
- Авторизация по паре логина и пароля (basic auth);
- PostgreSQL;
- Flask;
- SQLAlchemy.

## Chapter III
### Проект: Крестики-Нолики
Используй проект для серверной части с предыдущей недели Т03.

## Задание 1. Добавление базы данных
- Опиши подключение к базе данных PostgreSQL с расширением SQLALchemy.
- Избавься от класса-хранилища.
- Добавь специальные аннотации для параметров классов, которые необходимо сохранять в базу данных.

## Задание 2. Добавление авторизации
- Добавь пользователей, у которых будет UUID, логин, пароль.
- Реализуй поддержку пользователей на всех слоях.
- Создай модель SignUpRequest, у которой будет логин и пароль.
- Создай сервис авторизации, который использует UserService:
    - метод регистрации, который принимает SignUpRequest и возвращает факт успешной регистрации;
    - метод авторизации, который принимает в заголовке логин и пароль в виде base64(login:password) и возвращает UUID пользователя.
- Создай контроллер авторизации, у которого будут следующие endpoint'ы:
    - для регистрации пользователя,
    - для авторизации пользователя.
- Создай структуру UserAuthenticator с защитой от создания запросов неавторизированными пользователями:
    - Провалидируй логин и пароль.
    - Если валидация прошла успешно, то выполни запрос.
    - Если валидация прошла с ошибкой, то добавь в ответ 401 код и не выполняй запрос. 
- Добавь UserAuthenticator для своих запросов:
    - Разреши доступ без авторизации к endpoint'ам регистрации и авторизации.
    - Для всех остальных endpoint'ов должна требоваться авторизация.

## Задание 3. Добавление логики игры между двумя игроками
- Добавь состояния для текущей игры:
    - Ожидание игроков;
    - Ход игрока с UUID;
    - Ничья;
    - Победа игрока с UUID.
- Добавь в текущую игру информацию о значках, которыми будут ходить пользователи.
- Улучши алгоритм определения окончания игры с использованием состояний.
- Добавь endpoint для создания новой игры с пользователем или компьютером.
- Добавь endpoint для получения доступных текущих игр.
- Добавь endpoint для присоединения пользователя к игре.
- Улучши endpoint обновления текущей игры с учетом игры с пользователем или компьютером.
- Добавь endpoint для получения текущей игры.
- Добавь endpoint для получения информации о пользователе по UUID.
